{% extends "base.html" %}

{% block content %}
<!-- Header del Dashboard -->
<div class="dashboard-header">
    <div>
        <h2 style="color: var(--pink-dark); margin-bottom: 0.5rem;">
            ğŸ“š Mis Apuntes Kawaii
        </h2>
        <p style="color: var(--text); opacity: 0.8;">
            Â¡Hola {{ current_user.username }}! AquÃ­ estÃ¡n todos tus apuntes organizados ğŸ€
        </p>
    </div>
    <a href="{{ url_for('add_note') }}" class="btn-primary">
        âœ¨ Crear Nueva Nota
    </a>
</div>

<!-- EstadÃ­sticas RÃ¡pidas -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
    <div style="background: var(--white); padding: 1.5rem; border-radius: 20px; text-align: center; border: 2px solid var(--pink);">
        <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ“–</div>
        <div style="font-size: 1.5rem; font-weight: bold; color: var(--pink-dark);">{{ notes|length }}</div>
        <div style="color: var(--text);">Notas Totales</div>
    </div>
    
    <div style="background: var(--white); padding: 1.5rem; border-radius: 20px; text-align: center; border: 2px solid var(--blue);">
        <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ€</div>
        <div style="font-size: 1.5rem; font-weight: bold; color: var(--pink-dark);">{{ themes|length if themes else 4 }}</div>
        <div style="color: var(--text);">Temas Sanrio</div>
    </div>
    
    <div style="background: var(--white); padding: 1.5rem; border-radius: 20px; text-align: center; border: 2px solid var(--purple);">
        <div style="font-size: 2rem; margin-bottom: 0.5rem;">â­</div>
        <div style="font-size: 1.5rem; font-weight: bold; color: var(--pink-dark);">100%</div>
        <div style="color: var(--text);">Kawaii Level</div>
    </div>
</div>

<!-- Grid de Notas -->
{% if notes %}
<div class="notes-grid">
    {% for note in notes %}
    {% set theme = ['hello-kitty-theme', 'my-melody-theme', 'kuromi-theme', 'cinnamoroll-theme'] | random %}
    {% set character = ['ğŸ±', 'ğŸ°', 'ğŸ‘¿', 'ğŸ¶'] | random %}
    {% set theme_name = ['Hello Kitty', 'My Melody', 'Kuromi', 'Cinnamoroll'] | random %}
    
    <div class="note-card {{ theme }} floating">
        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
            <h3 style="margin: 0; flex: 1;">
                <span style="font-size: 1.5rem; margin-right: 0.5rem;">{{ character }}</span>
                {{ note.title }}
            </h3>
            <div style="background: var(--yellow); padding: 0.3rem 0.8rem; border-radius: 15px; border: 1px dashed var(--pink); font-size: 0.8rem;">
                {{ theme_name }}
            </div>
        </div>
        
        <p class="note-date">
            ğŸ“… Creado: {{ note.date_created.strftime('%d/%m/%Y a las %H:%M') }}
        </p>
        
        <div class="note-content">
            {% if note.content %}
                {{ note.content[:200] }}{% if note.content|length > 200 %}...{% endif %}
            {% else %}
                <span style="color: var(--text); opacity: 0.6;">Esta nota no tiene contenido aÃºn...</span>
            {% endif %}
        </div>
        
        <div style="margin-top: 1.5rem; display: flex; gap: 0.5rem; justify-content: space-between;">
            <small style="background: var(--mint); padding: 0.3rem 0.8rem; border-radius: 10px; border: 1px solid var(--blue);">
                {{ note.content|length if note.content else 0 }} caracteres
            </small>
            <small style="background: var(--pink-light); padding: 0.3rem 0.8rem; border-radius: 10px; border: 1px solid var(--pink);">
                {% if note.content and note.content|length > 150 %}ğŸ“– Larga{% else %}ğŸ““ Corta{% endif %}
            </small>
        </div>
    </div>
    {% endfor %}
</div>

{% else %}
<!-- Estado VacÃ­o Mejorado -->
<div class="empty-state">
    <div style="font-size: 4rem; margin-bottom: 1rem;">
        ğŸ± ğŸ° ğŸ¶ ğŸ‘¿
    </div>
    <h3 style="color: var(--pink-dark); margin-bottom: 1rem;">Â¡Oh no! No tienes notas aÃºn</h3>
    <p style="font-size: 1.1rem; margin-bottom: 2rem; color: var(--text);">
        Los personajes de Sanrio estÃ¡n esperando para ayudarte con tus estudios.<br>
        Â¡Crea tu primera nota y haz tu biblioteca kawaii!
    </p>
    <a href="{{ url_for('add_note') }}" class="btn-primary" style="display: inline-flex; align-items: center; gap: 0.5rem;">
        <span>âœ¨</span>
        Crear Mi Primera Nota
        <span>ğŸŒŸ</span>
    </a>
    
    <div style="margin-top: 2rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
        <div style="background: var(--pink-light); padding: 1rem; border-radius: 15px; text-align: center;">
            <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">ğŸ“š</div>
            <div style="font-weight: bold;">Apuntes de Clase</div>
        </div>
        <div style="background: var(--blue-light); padding: 1rem; border-radius: 15px; text-align: center;">
            <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">ğŸ”¬</div>
            <div style="font-weight: bold;">Notas de Estudio</div>
        </div>
        <div style="background: var(--mint); padding: 1rem; border-radius: 15px; text-align: center;">
            <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">ğŸ’¡</div>
            <div style="font-weight: bold;">Ideas y Proyectos</div>
        </div>
    </div>
</div>
{% endif %}

<!-- Tips Kawaii -->
<div style="background: linear-gradient(135deg, var(--yellow), var(--pink-light)); padding: 1.5rem; border-radius: 20px; margin-top: 3rem; border: 2px dashed var(--pink);">
    <div style="display: flex; align-items: center; gap: 1rem;">
        <div style="font-size: 2rem;">ğŸ’</div>
        <div>
            <h4 style="color: var(--pink-dark); margin-bottom: 0.5rem;">Tip Kawaii del DÃ­a</h4>
            <p style="color: var(--text); margin: 0;">
                Â¡Organiza tus notas por materias usando diferentes personajes de Sanrio! 
                Hello Kitty para matemÃ¡ticas, My Melody para literatura... Â¡SÃ© creativa! ğŸ€
            </p>
        </div>
    </div>
</div>
{% endblock %}